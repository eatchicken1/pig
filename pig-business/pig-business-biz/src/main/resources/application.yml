server:
  port: 5008

spring:
  application:
    name: pig-business
  cloud:
    nacos:
      username: @nacos.username@
      password: @nacos.password@
      discovery:
        server-addr: ${NACOS_HOST:127.0.0.1}:${NACOS_PORT:8848}
      config:
        server-addr: ${spring.cloud.nacos.discovery.server-addr}
  config:
    import:
      - nacos:application-@profiles.active@.yml
      - nacos:${spring.application.name}-@profiles.active@.yml
  datasource:
    # MySQL 8.x 驱动类
    driver-class-name: com.mysql.cj.jdbc.Driver
    # 数据库连接 URL（替换为你的数据库地址/库名，Pig 框架默认库名 pig）
    url: jdbc:mysql://localhost:3306/pig_business?useUnicode=true&characterEncoding=utf8&zeroDateTimeBehavior=convertToNull&useSSL=true&serverTimezone=GMT%2B8
    # 数据库账号密码（替换为你的实际账号）
    username: root
    password: root
    # 连接池配置（Pig 框架默认用 HikariCP，无需额外依赖）
    hikari:
      minimum-idle: 5
      maximum-pool-size: 20
      auto-commit: true
      idle-timeout: 30000
      pool-name: BusinessHikariCP
      max-lifetime: 60000
      connection-timeout: 30000
  ai:
    openai:
      # 替换为您的 API Key (OpenAI / DeepSeek / 通义千问等)
      api-key: sk-xxxxxxxxxxxxxxxxxxxxxxxx
      # 如果使用 DeepSeek 或国内中转，需要修改 base-url
      base-url: https://api.openai.com
      chat:
        options:
          # 模型名称 (gpt-3.5-turbo / deepseek-chat)
          model: gpt-3.5-turbo
          temperature: 0.7
    vectorstore:
      redis:
        # Redis 连接地址 (注意修改为你的 Redis 地址)
        uri: redis://:${spring.data.redis.password}@${spring.data.redis.host}:${spring.data.redis.port}
        # 向量索引名称
        index: frequency-index
        # 向量字段前缀
        prefix: "embedding:"
        # 即使数据为空也初始化 (开发阶段设为 true)
        initialize-schema: true

mybatis-plus:
  mapper-locations: classpath:/mybatis/mapper/**/*.xml
  global-config:
    db-config:
      table-prefix: biz_  # 业务表前缀

# 日志配置
logging:
  level:
    com.pig4cloud.pig.business.mapper: debug