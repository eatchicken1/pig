server:
  port: 5008

spring:
  application:
    name: pig-business
  cloud:
    nacos:
      username: @nacos.username@
      password: @nacos.password@
      discovery:
        server-addr: ${NACOS_HOST:127.0.0.1}:${NACOS_PORT:8848}
      config:
        server-addr: ${spring.cloud.nacos.discovery.server-addr}
  config:
    import:
      - nacos:application-@profiles.active@.yml
      - nacos:${spring.application.name}-@profiles.active@.yml
  datasource:
    # MySQL 8.x 驱动类
    driver-class-name: com.mysql.cj.jdbc.Driver
    # 数据库连接 URL（替换为你的数据库地址/库名，Pig 框架默认库名 pig）
    url: jdbc:mysql://localhost:3306/pig_business?useUnicode=true&characterEncoding=utf8&zeroDateTimeBehavior=convertToNull&useSSL=true&serverTimezone=GMT%2B8
    # 数据库账号密码（替换为你的实际账号）
    username: root
    password: root
    # 连接池配置（Pig 框架默认用 HikariCP，无需额外依赖）
    hikari:
      minimum-idle: 5
      maximum-pool-size: 20
      auto-commit: true
      idle-timeout: 30000
      pool-name: BusinessHikariCP
      max-lifetime: 60000
      connection-timeout: 30000
  data:
    redis:
      host: 127.0.0.1
      port: 6379
      password:
  ai:
    openai:
      api-key: ${QWEN_API_KEY}
      base-url: https://dashscope.aliyuncs.com/compatible-mode/v1
      chat:
        options:
          model: qwen-plus
          temperature: 0.7
      embedding:
        options:
          model: text-embedding-v1
    vectorstore:
      redis:
        index: frequency_idx
        prefix: "freq:emb:"
        initialize-schema: true

mybatis-plus:
  mapper-locations: classpath:/mybatis/mapper/**/*.xml
  global-config:
    db-config:
      table-prefix: biz_  # 业务表前缀

# 日志配置
logging:
  level:
    com.pig4cloud.pig.business.mapper: info